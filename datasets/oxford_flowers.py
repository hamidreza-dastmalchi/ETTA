import os

from .oxford_pets import OxfordPets
from .utils import DatasetBase
from .utils import generate_templates

#template = ['a photo of a {}, a type of flower.']
# template = ['a photo of a {}.']



template = [
    # Basic Descriptions
    'A photo of a {}.',
    'A close-up photo of a {}.',
    'A good photo of a {}.',
    'A bad photo of a {}.',
    'A blurry photo of a {}.',
    'A pixelated photo of a {}.',
    'A high-resolution photo of a {}.',
    'A low-resolution photo of a {}.',
    'A black and white photo of a {}.',
    'A vibrant photo of a {}.',

    # Artistic Representations
    'A painting of a {}.',
    'A drawing of a {}.',
    'A sketch of a {}.',
    'A doodle of a {}.',
    'A cartoon version of a {}.',
    'A watercolor painting of a {}.',
    'A crayon drawing of a {}.',
    'A digital painting of a {}.',
    'A sculpture of a {}.',
    'A tattoo of a {}.',
    'Graffiti of a {}.',
    'A 3D-rendered {}.',
    'A stylized illustration of a {}.',
    'A minimalist design of a {}.',
    'A fantasy-themed {}.',

    # Environmental Contexts
    'A {} in a garden.',
    'A {} growing in a field.',
    'A {} in the wild.',
    'A {} next to a river.',
    'A {} with butterflies around it.',
    'A {} surrounded by bees.',
    'A {} in a forest clearing.',
    'A {} near a waterfall.',
    'A {} on a mountain peak.',
    'A {} on a sunny day.',
    'A {} on a rainy day.',
    'A {} in the morning light.',
    'A {} at sunset.',
    'A {} under the night sky.',
    'A {} covered in morning dew.',
    'A {} in the middle of a storm.',
    'A {} growing from a crack in the sidewalk.',
    'A {} among the autumn leaves.',
    'A {} standing tall in the wind.',
    'A {} on a misty day.',

    # Objects & Compositions
    'A {} in a vase.',
    'A bouquet of {} arranged in a vase.',
    'A single {} in a pot.',
    'A {} wrapped in gift paper.',
    'A {} on a wedding table.',
    'A {} in a funeral arrangement.',
    'A {} inside a glass dome.',
    'A {} with a butterfly resting on it.',
    'A {} next to a cup of coffee.',
    'A {} in a decorative basket.',
    'A {} surrounded by candles.',
    'A {} placed on a book.',
    'A {} on a windowsill.',
    'A {} inside a terrarium.',
    'A {} with raindrops on its petals.',
    'A {} on a rustic wooden table.',
    'A {} placed in a glass bowl with water.',
    'A {} on a piece of fabric.',
    'A {} in a floral arrangement.',

    # Weather & Lighting Conditions
    'A {} glowing in golden sunlight.',
    'A {} under soft moonlight.',
    'A {} in the shadows.',
    'A {} in bright daylight.',
    'A {} glowing under UV light.',
    'A {} under artificial lighting.',
    'A {} illuminated by candlelight.',
    'A {} under a rainbow.',
    'A {} during a foggy morning.',
    'A {} against a thunderstorm.',
    'A {} in the frost of winter.',
    'A {} covered in snow.',
    'A {} swaying in the breeze.',
    'A {} under the desert sun.',
    'A {} caught in a sudden rain shower.',
    'A {} under heavy winds.',

    # Photography Styles
    'A macro shot of a {}.',
    'A wide-angle shot of a {}.',
    'A close-up of a {} in bloom.',
    'A panoramic view of a {} field.',
    'A tilted-angle photo of a {}.',
    'A soft-focus shot of a {}.',
    'A tilt-shift photo of a {}.',
    'An overexposed photo of a {}.',
    'A double exposure of a {}.',
    'A {} with a bokeh background.',
    'A time-lapse image of a {} blooming.',

    # Specific Flower Descriptions
    'A blooming {}.',
    'A withered {}.',
    'A {} in early bloom.',
    'A fully opened {}.',
    'A {} with curled petals.',
    'A {} with a bright center.',
    'A {} with velvety petals.',
    'A {} with striped petals.',
    'A {} with intricate patterns.',
    'A {} with a dark core.',
    'A {} with tiny stamens.',
    'A {} surrounded by green leaves.',
    'A {} covered in pollen.',
    'A {} with delicate translucent petals.',

    # Digital & Media Styles
    'A 3D model of a {}.',
    'A CGI-generated {}.',
    'A pixel art of a {}.',
    'A vector graphic of a {}.',
    'A hand-drawn sketch of a {}.',
    'A mosaic of a {}.',
    'A stained-glass depiction of a {}.',
    'A sepia-toned {}.',
    'A low-poly 3D render of a {}.',
    'A {} in a video game.',
    'A pixelated version of a {}.',
    'A {} in an anime scene.',
    'A holographic projection of a {}.',
    'A futuristic neon-glowing {}.',
    'A {} in a cyberpunk setting.',

    # Conceptual & Unusual
    'A {} growing on another planet.',
    'A {} with rainbow-colored petals.',
    'A {} in a surreal landscape.',
    'A {} with metallic petals.',
    'A {} floating in space.',
    'A {} carved into a stone.',
    'A {} with glowing petals.',
    'A {} made of crystal.',
    'A {} with fire-like colors.',
    'A {} entirely in shades of blue.',
    'A {} that looks like a mythical creature.',
    'A {} shaped like a heart.',
    'A {} in a completely white environment.',
    'A {} inside a floating bubble.',
    'A {} forming the shape of an animal.',

    # Human Interaction
    'A person holding a {}.',
    'A child smelling a {}.',
    'A hand gently touching a {}.',
    'A {} being given as a gift.',
    'A {} worn as a hair accessory.',
    'A {} in a floral tattoo design.',
    'A {} being watered.',
    'A {} being picked from a garden.',
    'A {} in a flower shop window.',
    'A {} worn as a brooch.',
    'A {} pinned to a wedding suit.',
    'A {} on a floral-patterned dress.',

    # Experimental
    'A {} under an X-ray scan.',
    'A heat-mapped visualization of a {}.',
    'A {} seen through a microscope.',
    'A {} in a glitch-art style.',
    'A {} with ultraviolet fluorescence.',
    'A {} turned into abstract art.',
    'A {} as part of a fractal design.',
    'A {} turned into ASCII art.',
    'A {} viewed under a thermal camera.',
    'A {} in an AI-generated dreamscape.',
]


# template = ['a bad photo of a {}.',
#     'a photo of many {}.',
#     'a sculpture of a {}.',
#     'a photo of the hard to see {}.',
#     'a low resolution photo of the {}.',
#     'a rendering of a {}.',
#     'graffiti of a {}.',
#     'a bad photo of the {}.',
#     'a cropped photo of the {}.',
#     'a tattoo of a {}.',
#     'the embroidered {}.',
#     'a photo of a hard to see {}.',
#     'a bright photo of a {}.',
#     'a photo of a clean {}.',
#     'a photo of a dirty {}.',
#     'a dark photo of the {}.',
#     'a drawing of a {}.',
#     'a photo of my {}.',
#     'the plastic {}.',
#     'a photo of the cool {}.',
#     'a close-up photo of a {}.',
#     'a black and white photo of the {}.',
#     'a painting of the {}.',
#     'a painting of a {}.',
#     'a pixelated photo of the {}.',
#     'a sculpture of the {}.',
#     'a bright photo of the {}.',
#     'a cropped photo of a {}.',
#     'a plastic {}.',
#     'a photo of the dirty {}.',
#     'a jpeg corrupted photo of a {}.',
#     'a blurry photo of the {}.',
#     'a photo of the {}.',
#     'a good photo of the {}.',
#     'a rendering of the {}.',
#     'a {} in a video game.',
#     'a photo of one {}.',
#     'a doodle of a {}.',
#     'a close-up photo of the {}.',
#     'a photo of a {}.',
#     'the origami {}.',
#     'the {} in a video game.',
#     'a sketch of a {}.',
#     'a doodle of the {}.',
#     'a origami {}.',
#     'a low resolution photo of a {}.',
#     'the toy {}.',
#     'a rendition of the {}.',
#     'a photo of the clean {}.',
#     'a photo of a large {}.',
#     'a rendition of a {}.',
#     'a photo of a nice {}.',
#     'a photo of a weird {}.',
#     'a blurry photo of a {}.',
#     'a cartoon {}.',
#     'art of a {}.',
#     'a sketch of the {}.',
#     'a embroidered {}.',
#     'a pixelated photo of a {}.',
#     'itap of the {}.',
#     'a jpeg corrupted photo of the {}.',
#     'a good photo of a {}.',
#     'a plushie {}.',
#     'a photo of the nice {}.',
#     'a photo of the small {}.',
#     'a photo of the weird {}.',
#     'the cartoon {}.',
#     'art of the {}.',
#     'a drawing of the {}.',
#     'a photo of the large {}.',
#     'a black and white photo of a {}.',
#     'the plushie {}.',
#     'a dark photo of a {}.',
#     'itap of a {}.',
#     'graffiti of the {}.',
#     'a toy {}.',
#     'itap of my {}.',
#     'a photo of a cool {}.',
#     'a photo of a small {}.',
#     'a tattoo of the {}.'
#     'A close-up photo of a {} flower in bloom.',
#     'A beautiful {} growing in a garden.',
#     'A single {} in a vase.',
#     'A field full of {} flowers.',
#     'A vibrant {} with colorful petals.',
#     'A {} flower covered in morning dew.',
#     'A bouquet of {} arranged in a vase.',
#     'A delicate {} growing in the wild.',
#     'A blooming {} with soft petals.',
#     'A {} with a bright center.',
#     'A close-up of a {} surrounded by green leaves.',
#     'A macro shot of a {} in full bloom.',
#     'A bunch of {} arranged as a bouquet.',
#     'A vibrant {} against a dark background.',
#     'A {} swaying in the breeze.',
#     'A close-up of a {} in a flower bed.',
#     'A {} in a floral arrangement.',
#     'A {} on a sunny day in the park.',
#     'A beautiful {} blossoming in spring.',
#     'A {} in full bloom with other wildflowers.']


# template = [
#     "a photo of a blooming {}.",
#     "a close-up photo of a {}.",
#     "a photo of a {} in a garden.",
#     "a photo of a {} in full bloom.",
#     "a photo of a {} with dew drops.",
#     "a photo of a {} in a field.",
#     "a photo of a {} in a vase.",
#     "a photo of a {} in the sunlight.",
#     "a photo of a {} in the shade.",
#     "a photo of a {} with bees on it.",
#     "a photo of a {} with butterflies nearby.",
#     "a photo of a single {}.",
#     "a photo of a bunch of {}.",
#     "a photo of a {} in a bouquet.",
#     "a photo of a {} in the wild.",
#     "a photo of a {} next to other flowers.",
#     "a photo of a {} in a flower pot.",
#     "a photo of a {} on a sunny day.",
#     "a photo of a {} on a rainy day.",
#     "a photo of a {} during spring.",
#     "a photo of a {} during summer.",
#     "a photo of a {} during autumn.",
#     "a photo of a {} during winter.",
#     "a close-up photo of a {}'s petals.",
#     "a photo of a {} with vibrant colors.",
#     "a photo of a {} with pastel tones.",
#     "a photo of a {} in a park.",
#     "a photo of a {} in a forest.",
#     "a black and white photo of a {}.",
#     "a photo of a {} surrounded by green leaves.",
#     "a photo of a {} in a flower bed.",
#     "a photo of a {} on a windowsill.",
#     "a photo of a {} next to a fence.",
#     "a photo of a {} on a hillside.",
#     "a photo of a {} by a lake.",
#     "a photo of a {} after rain.",
#     "a photo of a {} on a cloudy day.",
#     "a photo of a {} in a meadow.",
#     "a photo of a {} growing in a crack in the sidewalk.",
#     "a photo of a {} being held in someone's hand.",
#     "a painting of a {}.",
#     "a drawing of a {}.",
#     "a photo of a {} at sunset.",
#     "a photo of a {} at sunrise.",
#     "a photo of a dried {}.",
#     "a photo of a {} pressed in a book.",
#     "a photo of a {} growing on a tree.",
#     "a photo of a {} with its stem visible.",
#     "a photo of a {} in a greenhouse.",
#     "a photo of a {} being watered.",
#     "a photo of a {} on a table.",
#     "a photo of a {} surrounded by rocks.",
#     "a photo of a {} in a floral arrangement.",
#     "a macro photo of a {}.",
#     "a photo of a {} in a botanical garden.",
#     "a photo of a {} swaying in the wind.",
#     "a photo of a {} on a mountain trail.",
#     "a photo of a {} next to a statue.",
#     "a photo of a {} covered in frost.",
#     "a photo of a {} glowing in the golden hour.",
#     "a candid photo of a {}.",
#     "a professional photo of a {}.",
#     "a photo of a {} with blurred background.",
#     "a photo of a {} in front of a brick wall.",
#     "a photo of a {} in a tropical setting.",
#     "a photo of a {} next to a waterfall."
# ]



class OxfordFlowers(DatasetBase):

    dataset_dir = 'oxford_flowers'

    def __init__(self, root):
        self.dataset_dir = os.path.join(root, self.dataset_dir)
        self.image_dir = os.path.join(self.dataset_dir, 'jpg')
        self.label_file = os.path.join(self.dataset_dir, 'imagelabels.mat')
        self.lab2cname_file = os.path.join(self.dataset_dir, 'cat_to_name.json')
        self.split_path = os.path.join(self.dataset_dir, 'split_zhou_OxfordFlowers.json')

        self.template = template

        test = OxfordPets.read_split(self.split_path, self.image_dir)
        
        super().__init__(test=test)